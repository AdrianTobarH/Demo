:root {
  --env: #e84545;
  --env-dark: #c73737;
  --paper: #fffaf1;
  --shadow: rgba(0,0,0,.15);
}

* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, Arial, sans-serif; background: #f7f7fb; }
.scene { min-height: 100svh; display: grid; place-items: center; padding: 24px; }

.envelope {
  position: relative;
  width: 280px; height: 180px;
  background: var(--env);
  border: 0; border-radius: 12px; box-shadow: 0 20px 60px var(--shadow);
  cursor: pointer;
  transition: transform .25s ease;
}
.envelope:active { transform: translateY(2px); }
.envelope .front {
  position: absolute; inset: 0;
  background: linear-gradient(0deg, var(--env) 0 50%, var(--env-dark) 50% 100%);
  border-radius: 12px;
}
.envelope .flap {
  position: absolute; inset: 0 0 50% 0;
  background: var(--env-dark);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  transform-origin: top center;
  transition: transform .6s cubic-bezier(.2,.8,.2,1);
  border-top-left-radius: 12px; border-top-right-radius: 12px;
}
.envelope .seal {
  position: absolute; left: 50%; top: 48%;
  transform: translate(-50%, -50%);
  background: #fff; color: var(--env);
  width: 44px; height: 44px; border-radius: 50%;
  display: grid; place-items: center; font-size: 20px;
  box-shadow: 0 4px 16px var(--shadow);
}

/* The letter (card) */
.card {
  width: min(560px, 92vw);
  background: var(--paper);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 24px 80px var(--shadow);
  translate: 0 12px;
  opacity: 0;
  transition: opacity .5s ease, translate .5s ease;
}
.card img { width: 100%; height: auto; border-radius: 12px; }

.signature { margin-top: 16px; font-style: italic; color: #444; }

/* Hearts */
#hearts { position: fixed; inset: 0; pointer-events: none; overflow: hidden; }
.heart {
  position: absolute; width: 18px; height: 18px; rotate: 45deg;
  background: #ff6b6b; opacity: .85;
  transform: translate(-50%, -50%);
  animation: floatUp 3.5s ease-in forwards;
}
.heart::before, .heart::after {
  content: ""; position: absolute; width: 18px; height: 18px; border-radius: 50%;
  background: inherit;
}
.heart::before { left: -9px; top: 0; }
.heart::after  { top: -9px; left: 0; }
@keyframes floatUp {
  0% { transform: translate(-50%, 0) scale(.8); opacity: .9; }
  100% { transform: translate(-50%, -120vh) scale(1.2); opacity: 0; }
}

/* Open state */
.open .flap { transform: rotateX(180deg); }
.open + .card { opacity: 1; translate: 0 -8px; }

/* A11y */
.visually-hidden {
  position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden;
  clip:rect(0 0 0 0); white-space:nowrap; border:0;
}
